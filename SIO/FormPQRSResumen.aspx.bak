<%@ Page Title="" Language="C#" MasterPageFile="~/General.Master" AutoEventWireup="true" CodeBehind="FormPQRSResumen.aspx.cs" Inherits="SIO.FormPQRSResumen" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <script type="text/javascript" src="Scripts/jquery-3.0.0.min.js"></script>
		<script type="text/javascript" src="Scripts/umd/popper.min.js"></script>
		<script type="text/javascript" src="Scripts/PluralRuleParser.js"></script>
		<script type="importmap">
			{ "imports": { "vue": "../Scripts/vue.esm-browser.js", "vue3-easy-data-table": "../Scripts/vue3-easy-data-table.umd.js" } }
		</script>

		<script type="module" src="Scripts/formpqrsResumen.js?v=202303A"></script>

		<script type="text/javascript" src="Scripts/bootstrap.min.js"></script>
		<script type="text/javascript" src="Scripts/select2.min.js"></script>
		<script type="text/javascript" src="Scripts/toastr.min.js"></script>
		<script type="text/javascript" src="Scripts/loadingoverlay.min.js"></script>
		<script type="text/javascript" src="Scripts/moment.js?v=20200629"></script>

		<link rel="Stylesheet" href="Content/bootstrap.min.css" />
		<link rel="Stylesheet" href="Content/SIO.css" />
		<link rel="Stylesheet" href="Scripts/TableVue/style.css" />
		<link rel="stylesheet" href="Content/font-awesome.css" />
		<link rel="Stylesheet" href="Content/css/select2.min.css" />
		<link href="Content/toastr.min.css" rel="stylesheet" />
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder4" runat="server">

    <div id="loader" style="        display: none">
			<h3>Procesando...</h3>
		</div>
		<div id="ohsnap"></div>

	 <div class="container-fluid contenedor_fup" id="app">
         <div class="row">
             <div class="btn-group col align-self-end" role="group" aria-label="Basic example">
				<button type="button" class="btn btn-secondary langes">
					<img alt="español" src="Imagenes/colombia.png" /></button>
				<button type="button" class="btn btn-secondary langen">
					<img alt="ingles" src="Imagenes/united-states.png" /></button>
				<button type="button" class="btn btn-secondary langbr">
					<img alt="portugues" src="Imagenes/brazil.png" /></button>
                 <h6 class="ml-4 mt-2" style="font-size: 20px;"><b>¡Atención Con5entidos!</b></h6>
			</div>
         </div>

         <!-- Modal para procedencia -->
         <div class="modal fade " id="ModalReclamoProcedente" tabindex="-1" role="dialog" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content modal-lg">
						<div class="modal-header">
							<h5 class="modal-title">Reclamo Procedente </h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					        <span aria-hidden="true">&times;</span>
				        </button>
						</div>
						<div class="modal-body p-3">
						
							<div class="row">
                              
                                <div class="col-sm-1"></div>
                                <div class="col-sm-4"><label><b>Es Procedente ? &nbsp;</b></label></div>
                                <div class="col-sm-4"><label><input  type="radio"  value='true' v-model="pqrsProcedente.EsProcedente"  />  &nbsp;Si</label> &nbsp;
                                <label><input  type="radio" value='false' v-model="pqrsProcedente.EsProcedente"/>  &nbsp;No</label>  </div>

							</div>

                            <div class="row mx-3 pb-2"> 
                                <textarea v-model="pqrsProcedente.DescripcionNoProcedente" class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" id="requierelistadosDescripcion" rows="5" placeholder=" Ingrese una razon porque es o no procedente........ " ></textarea>
                           </div>    

							<div class="row" v-if="pqrsProcedente.EsProcedente == 'true'">
								<div class="col-sm-2"></div>
								<div class="col-sm-8">
									<table class="wfull">
										<thead>
											<tr>
												<th class="text-center" style="width:20%">Seleccionar</th>
												<th class="text-center" style="width:40%">Proceso</th>
												<th class="text-center" style="width:40%">Tipo NC</th>
											</tr>
										</thead>
										<tbody>
											<tr v-for="(item, index) in procesos">
												<td class="text-center"><input v-model="item.Seleccionado" type="checkbox" /></td>
												<td>{{item.Proceso}}</td>
												<td>
                                                    <select v-model="item.TipoNC"  class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" >
                                                         <option v-for="(itemTNC, indexTNC) in tipoNC" :value="itemTNC.Id" :key="index">
                                                            {{ itemTNC.Descripcion }}
                                                         </option>
                                                    </select>
												</td>
											</tr>
										</tbody>
									</table>
								</div>

                           </div>
                            <div class="row" v-if="pqrsProcedente.EsProcedente == 'true'">
                                <div class="col-sm-1"></div>
                                <div class="col-sm-4"><label><b>Desea selecionar una orden existente? &nbsp;</b></label></div>
                                <div class="col-sm-4"><label><input  type="radio" id="update" value="true" v-model="pqrsProcedente.existeOrden"  />  &nbsp;Si</label> &nbsp;
                                <label><input  type="radio" id="New" value="false" v-model="pqrsProcedente.existeOrden"/>  &nbsp;No</label>  </div>
                            </div>
                            <div class="row" v-if="pqrsProcedente.EsProcedente == 'true' && pqrsProcedente.existeOrden == 'true'"   >
                                 <div class="col-sm-1"></div>
                                   <div class="col-sm-4">
                                    <select  class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" v-model="pqrsProcedente.Idordenprocedente">
                                       <option value="-1">Seleccionar Orden</option>
                                        <option v-for="(itemq, indexOrden) in numordenes" :value="itemq.IdOfa" :key="indexOrden">
                                            {{ itemq.Orden }}
                                        </option>
                                    </select> </div>
                             </div>       
                            <div class="row" v-if="pqrsProcedente.EsProcedente == 'true' && pqrsProcedente.existeOrden == 'false'"   >
                                 <div class="col-sm-1"></div>
                                   <div class="col-sm-4">
                                    <select  class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" v-model="pqrsProcedente.OrdenGarantiaOMejora">
                                        <option value="-1">Seleccionar Opción</option>
                                        <option value="OG">Orden de Garantía</option>
                                        <option value="OG">Orden de Mejora</option>
                                    </select> </div>
                             </div>                                  
                            <div class="row" v-if="pqrsProcedente.EsProcedente == 'true'">
                                <div class="col-sm-1"></div>
                                <div class="col-sm-4"><label><b>Requiere listados? &nbsp;</b></label>
                                    
                                <label><input  type="radio" id="pedirCorreo" value="true"  v-model="pqrsProcedente.requierelistados"  />  &nbsp;Si</label> &nbsp;
                                <label><input  type="radio" id="pedirDescripcion" value="false" v-model="pqrsProcedente.requierelistados" />  &nbsp;No</label>                       
                                   
                                <div class="col-sm-15" v-if="pqrsProcedente.requierelistados == 'true'" >
                                 <textarea v-model="pqrsProcedente.requierelistadosCorreos" class ="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" id="requierelistadosCorreos" rows="5" placeholder=" Ingrese los correos a notificar separados por ;  " ></textarea>
                                </div>                    
                                <div class="col-sm-15" v-else> 
                                <textarea v-model="pqrsProcedente.requierelistadosDescripcion" class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" id="requierelistadosDescripcion" rows="5" placeholder=" Ingrese una descripción " ></textarea>
                                </div>                           
							</div>
                          </div>


						<div class="modal-footer">
							<button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
							<button type="button" class="btn btn-success ml-1 " @click="ValidarPQRSProcedencia()">Guardar</button>
                            
							
						</div>
					</div>
				</div>
			</div>
            </div>
         <!-- Fin modal procedencia --> 

         <!-- Modal para enviar comunicados -->
         <div class="modal fade " id="ModalEnviarComunicado" tabindex="-1" role="dialog" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content modal-lg">
						<div class="modal-header">
							<h5 class="modal-title">Enviar Comunicado al Cliente </h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					        <span aria-hidden="true">&times;</span>
				        </button>
						</div>
						<div class="modal-body p-3">
			            <div class="row">
                            <div class="col-2"><label>Para:</label></div>
                            <div class="col-4"><div class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline">{{infoPQRSEmailRespuesta}}</div></div>                                    
                            <div class="col-1"><label>CC:</label></div>
                            <div class="col-5"><input type="text" v-model="enviarComunicado.Cc" class="block appearance-none w-full bg-white border border-gray-400 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" />  Ingrese los correos a notificar separados por ; </div>                                    
                          
                        </div>
                   

                          <div class="row">
                             <div class="col-2"><label>Asunto:</label></div>
                             <div class="col-10"><input type="text" v-model="Asuntopqrs"  class="block appearance-none w-full bg-white border border-gray-400 px-4 py-2 pr-8  rounded shadow leading-tight focus:outline-none focus:shadow-outline" /></div>
                        </div>
                           
                            
							<div class="row">
                                <div class="col-sm-2"><b>Mensaje</b></div>
                                <div class="col-10">
								    <textarea  v-model="enviarComunicado.mensaje" class="shadow leading-tight w-full bg-white border rounded w-full py-2 px-3 text-gray-500 leading-tight focus:outline-none focus:shadow-outline" id="mensajeCli" rows="5" placeholder=".... comunicado aqui" required v-model="mensajeCliente"></textarea>
                                </div>
							</div>

                            <div class="row mt-3">
                                <div class="col-sm-2"><b>Incluir encuesta de satisfacción </b></div>
                                <div class="col-1">
                                    <input type="checkbox" class="form-control" v-model="enviarComunicado.incluirEncuesta"/>
                                </div>
                            </div>

                            <div class="row">
                                <div class="main">
								<div class="dropzone-container" @dragover="dragover" @dragleave="dragleave" @drop="dropComunicado">
									<input type="file" multiple name="fileComunicado" id="fileInputComunicado" class="hidden-input" @change="onChangeComunicado" ref="fileComunicado" accept=".doc,.docx,.pdf,.jpg,.jpeg,.png" />

									<label for="fileInputComunicado" class="file-label">
                                        <div v-if="isDragging">Arrastra y suelta el comunicado Aqui.</div>
                                        <div v-else>Suelta los archivos aqui  o <u>click aqui</u> para cargar comunicado.</div>
                                    </label>

									<div class="preview-container mt-2" v-if="files.length">
										<div v-for="file in files" :key="file.name" class="preview-card">
											<div>
												<img class="preview-img" :src="generateThumbnail(file)" />
												<p :title="file.name">
													{{ makeName(file.name) }}
												</p>
											</div>
											<div>
												<button class="ml-2" type="button" @click="remove(files.indexOf(file))" title="Remove file">
                                                 <b>&times;</b>
                                                </button>
											</div>
										</div>
									</div>
								</div>
							</div>
							</div>

							
                           

						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
							<button type="button" id="btnEnviarMensajeCliente" @click="validarEnviarMensajeCliente(enviarComunicado)" class="btn btn-success">Enviar</button>
						</div>
					</div>
				</div>
			</div>
         <!-- Fin del modal para enviar comunicados -->

         <!-- Modal para cargar listados requeridos -->
         <div class="modal fade " id="ModalAgregarListadosRequerido" tabindex="-1" role="dialog" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content modal-lg">
						<div class="modal-header">
							<h5 class="modal-title">Agregar Listados Requeridos </h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					        <span aria-hidden="true">&times;</span>
				        </button>
						</div>
						<div class="modal-body p-3">

                            <div class="row" >
								<div class="col-sm-2"></div>
								<div class="col-sm-8">
									<table class="wfull">
										<thead>
											<tr>
												<th class="text-center" style="width:20%">Mail </th>
												<th class="text-center" style="width:40%">Usuario </th>
												<th class="text-center" style="width:40%">Estado </th>
											</tr>
										</thead>
										<tbody>
											<tr v-for="(item, index) in listadosCargados">
												<td class="text-left">{{item.mail}}</td>
												<td class="text-center">{{item.usuario}} </td>
												<td class="text-center"><i v-if="item.valido ==1" class="fa fa-thumbs-up fa-2x text-info" aria-hidden="true"></i> <i v-if="item.valido==0" class="fa fa-thumbs-o-down fa-2x text-danger" aria-hidden="true"></i> </td>
											</tr>
										</tbody>
									</table>

                                   

								</div>
                            </div>

						    <div class="row">
                                <div class="main">
								        <div class="dropzone-container" @dragover="dragover" @dragleave="dragleave" @drop="dropListados">
									        <input type="file" multiple name="fileInputListados" id="fileInputListados" class="hidden-input" @change="onChangeListados" ref="fileInputListados" accept=".pdf,.jpg,.jpeg,.png" />

									        <label for="fileInputListados" class="file-label">
                                                <div v-if="isDragging">Arrastra y suelta los archivos aqui.</div>
                                                <div v-else>Suelta los archivos aqui  o <u>click aqui</u> para cargar.</div>
                                            </label>

									        <div class="preview-container mt-2" v-if="files.length">
										        <div v-for="file in files" :key="file.name" class="preview-card">
											        <div>
												        <img class="preview-img" :src="generateThumbnail(file)" />
												        <p :title="file.name">
													        {{ makeName(file.name) }}
												        </p>
											        </div>
											        <div>
												        <button class="ml-2" type="button" @click="remove(files.indexOf(file))" title="Remove file">
                                                         <b>&times;</b>
                                                        </button>
											        </div>
										        </div>
									        </div>
								        </div>
							        </div>                         
						    </div>
                        
				     	</div>
                        <div class="modal-footer">
							<button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
							<button type="button" id="btnAgregarListadosRequeridos" @click="ValidarGuardarListadosRequeridos()" class="btn btn-success">Guardar</button>
						</div>
				   </div>
			    </div>
            </div>
         <!-- Fin modal listados requeridos -->

        <!-- Modal -->
        <div class="modal fade" id="editResumenDataModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="detModalLabel">Información PQRS</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div>
                    <div class="row">
                        <div class="col-12">Descripción</div>
                    </div>
                    <div class="row">
                        <textarea class="form-control mx-3" rows="3" v-model="infoPQRSDetalle"></textarea>
                    </div>
                    <div class="row" v-if="infoPQRSClienteNombre == ''">
                        <div class="col-4">Cliente</div>
                        <div class="col-8">
                            <input class="form-control" v-model="infoPQRSOtroClienteNombre"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4">Nombre Respuesta</div>
                        <div class="col-8">
                            <input class="form-control" v-model="infoPQRSNombreRespuesta"/>
                        </div>
                    </div>
                     <div class="row">
                        <div class="col-4">Dirección Respuesta</div>
                        <div class="col-8">
                            <input class="form-control" v-model="infoPQRSDireccionRespuesta"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4">Email Respuesta</div>
                        <div class="col-8">
                            <input class="form-control" v-model="infoPQRSEmailRespuesta"/>
                        </div>
                     </div>
                    <div class="row">
                        <div class="col-4">Teléfono Respuesta</div>
                        <div class="col-8">
                            <input class="form-control" v-model="infoPQRSTelefonoRespuesta"/>
                        </div>
                    </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" ref="cerrarModificarDatosGeneralesPQRS">Cancelar</button>
                <button type="button" class="btn btn-primary" v-on:click="GuardarPQRSDatosGenerales()">Guardar</button>
              </div>
            </div>
          </div>
        </div>

         <!-- Modales para cargar mas archivos -->
        <div class="modal fade" id="adicionarArchivosRadicacionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title"> Adicionar archivos</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div>
                    <input type="file" class="" id="addFilesRadicado" ref="addFilesRadicado" multiple="multiple"/>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" ref="CerrarModalAdicionarArchivos">Cancelar</button>
                <button type="button" class="btn btn-primary" v-on:click="AdicionarArchivosRadicado()">Añadir</button>
              </div>
            </div>
          </div>
        </div>

        <div class="modal fade" id="adicionarArchivosComprobacionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title"> Adicionar archivos</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div>
                    <input type="file" class="" id="addFilesImplementacion" ref="addFilesImplementacion" multiple="multiple"/>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" ref="CerrarModalAdicionarArchivosImplementacion">Cancelar</button>
                <button type="button" class="btn btn-primary" v-on:click="AdicionarArchivosImplementacion()">Añadir</button>
              </div>
            </div>
          </div>
        </div>

         <div class="modal fade" id="adicionarArchivosCierreModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title"> Adicionar archivos</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div>
                    <input type="file" class="" id="addFilesCierre" ref="addFilesCierre" multiple="multiple"/>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" ref="CerrarModalAdicionarArchivosCierre">Cancelar</button>
                <button type="button" class="btn btn-primary" v-on:click="AdicionarArchivosCierre()">Añadir</button>
              </div>
            </div>
          </div>
        </div>

         <div class="modal fade" id="adicionarArchivosListadosModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title"> Adicionar archivos</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div>
                    <input type="file" class="" id="addFilesListados" ref="addFilesListados" multiple="multiple"/>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" ref="CerrarModalAdicionarArchivosListados">Cancelar</button>
                <button type="button" class="btn btn-primary" v-on:click="AdicionarArchivosListados()">Añadir</button>
              </div>
            </div>
          </div>
        </div>
         <!-- Fin modales para cargar mas archivos -->

         <!-- Modal para solicitar mas informacion a procesos -->
         <div class="modal fade" id="modalSolicitarInformacionProcesos" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Solicitar información proceso - {{nombrePQRSProcesoTemp}}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div>
                    <textarea class="form-control" rows="3" placeholder="Informacion requerida" ref="mensajeAdicionalSolicitarInformacionProcesos"></textarea>
                    <span class="mt-3">Archivos</span>
                    <input type="file" class="form-control" id="addFilesSolicitarInformacionProcesos" ref="addFilesSolicitarInformacionProcesos" multiple="multiple"/>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" ref="CerrarModalSolicitarInformacionProcesos">Cancelar</button>
                <button type="button" class="btn btn-primary" v-on:click="SolicitarInformacionProcesos()">Solicitar</button>
              </div>
            </div>
          </div>
        </div>
         <!-- Fin modal solicitar informacion a procesos -->

         <!-- Modal para adicionar respuestas procesos -->
         <div class="modal fade" id="modalAdicionarRespuestasProcesos" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Añadir respuesta procesos</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div>
                    <div class="row">
                        <div class="col-3">Proceso</div>
                        <div class="col-9">
                            <select class="form-control" id="selectProcesoRespuesta" v-model="adicionRespuestaProceso.proceso">
                                
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-3">Respuesta</div>
                        <div class="col-9">
                            <textarea class="form-control" rows="3" v-model="adicionRespuestaProceso.respuesta"></textarea>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-3">Archivos</div>
                        <div class="col-9">
                            <input type="file" class="" id="addFilesRespuestaProceso" ref="addFilesRespuestaProceso" multiple="multiple"/>
                        </div>
                    </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" ref="CerrarModalAdicionarRespuestasProcesos">Cancelar</button>
                <button type="button" class="btn btn-primary" v-on:click="AdicionarRespuestaProceso()">Añadir</button>
              </div>
            </div>
          </div>
        </div>
         <!-- Fin modal adicionar respuestas procesos -->

         <div class="modal fade " id="ModalCierreObra" tabindex="-1" role="dialog" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content modal-lg">
						<div class="modal-header">
							<h5 class="modal-title">Cierre Reclamacion </h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					        <span aria-hidden="true">&times;</span>
				        </button>
						</div>
						<div class="modal-body p-3">
			            
                        <div class="row">
                             <div class="col-2"><label>Cierre</label></div>
                              <div class="col-4"><input type="date" v-model="cierre.fechaCierrePlan" min="1900-01-01" max="2118-12-31" class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" /></div>
                        </div>
						<div class="row">
                                <div class="col-sm-2"><b>Plan de Accion</b></div>
                                <div class="col-10">
								    <textarea  v-model="cierre.planAccion" class="shadow leading-tight w-full bg-white border rounded w-full py-2 px-3 text-gray-500 leading-tight focus:outline-none focus:shadow-outline" id="cierreReclamacionPlanAccion" rows="5" placeholder=".... plan de accion aqui" required v-model="planAccion"></textarea>
                                </div>
						</div>
                           
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
							<button type="button" id="btnEnviarCierreReclamacion" @click="validarEnviarCierreReclamacion(cierre)" class="btn btn-success">Guardar</button>
						</div>
					</div>
				</div>
			</div>

         <!-- Modal para editar las fechas planeadas en produccion -->
         <div class="modal fade " id="ModalEditarProduccion" tabindex="-1" role="dialog" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content modal-lg">
						<div class="modal-header">
							<h5 class="modal-title">Editar fechas Produccion </h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					        <span aria-hidden="true">&times;</span>
				        </button>
						</div>
						<div class="modal-body p-3">
                            <div class="row">
                                 <div class="col-4"><label></label></div>
                                 <div class="col-4"><label>Producción Aluminio</label></div>
                                 <div class="col-4"><label>Producción Acero</label></div>
                            </div>
                            <div class="row">
                                <div class="col-4"><label>Fecha Despacho Real</label></div>
                                    <div class="col-4">
                                        <input type="date" ref="editFechaPlanAlum" min="1980-01-01" max="2100-12-31" class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" />
                                    </div>
                                    <div class="col-4">
                                        <input type="date" ref="editFechaPlanAcero" min="1980-01-01" max="2100-12-31" class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" />
                                    </div>
		                     </div>
						<div class="modal-footer">
							<button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
							<button type="button" @click="ValidarEditarFechasProduccion()" class="btn btn-success">Guardar</button>
						</div>
					</div>
				</div>
			</div>
         </div>
         <!-- Fin modal edicion fechas -->

         <div class="modal fade " id="ModalProduccion" tabindex="-1" role="dialog" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content modal-lg">
						<div class="modal-header">
							<h5 class="modal-title">Producción </h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					        <span aria-hidden="true">&times;</span>
				        </button>
						</div>
						<div class="modal-body p-3">
			            
                            <div class="row">
                                 <div class="col-4"><label></label></div>
                                 <div class="col-4"><label>Producción Aluminio</label></div>
                                  <div class="col-4"><label>Producción Acero</label></div>
                            </div>
						    <div class="row">
                                    <div class="col-4"><label>Fecha Planeada</label></div>
                                    <div class="col-4">
                                        <input type="date" v-model="pqrsprod.fecha_plan_alum" min="1980-01-01" max="2100-12-31" class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" />
                                    </div>
                                    <div class="col-4">
                                        <input type="date" v-model="pqrsprod.fecha_plan_acero" min="1980-01-01" max="2100-12-31" class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" />
                                    </div>
						    </div>
                            <div class="row">
                                    <div class="col-4"><label>Fecha Requerida</label></div>
                                    <div class="col-4">
                                        <input type="date" v-model="pqrsprod.fecha_req_alum" min="1980-01-01" max="2100-12-31" class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" />
                                    </div>
                                    <div class="col-4">
                                        <input type="date" v-model="pqrsprod.fecha_req_acero" min="1980-01-01" max="2100-12-31" class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" />
                                    </div>
						    </div>
                          <div class="row">
                                    <div class="col-4"><label>Fecha Despacho Real</label></div>
                                    <div class="col-4">
                                        <input type="date" v-model="pqrsprod.fecha_desp_alum" min="1980-01-01" max="2100-12-31" class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" />
                                    </div>
                                    <div class="col-4">
                                        <input type="date" v-model="pqrsprod.fecha_desp_acero" min="1980-01-01" max="2100-12-31" class="block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline" />
                                    </div>
						    </div>
                              <%--  <div class="row">
                                    <div class="col-4"><label>Fecha Entr. Obra</label></div>
                                    <div class="col-4">
                                         {{pqrsprod.fecha_ent_obra}}
                                    </div>
						    </div>--%>                           
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
							<button type="button" id="btnFinalizarPRoceso" @click="cerrarProduccion()" class="btn btn-success">Guardar</button>
						</div>
					</div>
				</div>
			</div>

                     <div class="modal fade " id="ModalComprobanteObra" tabindex="-1" role="dialog" aria-hidden="true">
				        <div class="modal-dialog" role="document">
					        <div class="modal-content modal-lg">
						        <div class="modal-header">
							        <h5 class="modal-title">Comprobante Obra </h5>
							        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
					                <span aria-hidden="true">&times;</span>
				                </button>
						        </div>
						        <div class="modal-body p-3">
                                    <div class="row">
                                            <div class="main">
								                <div class="dropzone-container" @dragover="dragover" @dragleave="dragleave" @drop="dropProd">
									                <input type="file" multiple name="fileProd" id="fileProd" class="hidden-input" @change="onChangeProd" ref="fileProd" accept=".pdf,.jpg,.jpeg,.png" />

									                <label for="fileProd" class="file-label">
                                                         <div v-if="isDragging">Release to drop files here.</div>
                                                         <div v-else>Drop files here or <u>click here</u> to upload.</div>
                                                    </label>

									                <div class="preview-container mt-2" v-if="files.length">
										                <div v-for="file in files" :key="file.name" class="preview-card">
											                <div>
												                <img class="preview-img" :src="generateThumbnail(file)" />
												                <p :title="file.name">
													                {{ makeName(file.name) }}
												                </p>
											                </div>
											                <div>
												                <button class="ml-2" type="button" @click="remove(files.indexOf(file))" title="Remove file">
                                                                 <b>&times;</b>
                                                                </button>
											                </div>
										                </div>
									                </div>
								                </div>
							                </div>                         
						            </div>
						        </div>
						        <div class="modal-footer">
							        <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
							        <button type="button" @click="CerrarComprobanteObra()" class="btn btn-success">Guardar</button>
						        </div>
					        </div>
				        </div>
			        </div>


         <div class="row mx-1 bg-white py-2 border pr-3">
             <div class="col-1 d-flex" style="font-weight: bold; font-size: 16px;">
                 <span class="align-self-center">PQRS #</span> 
             </div>
             <div class="col-1 d-flex">
                 <input type="number" step="1" class="form-control align-self-center" v-model="idPQRS"/> 
             </div>
             <div class="col-1 d-flex">
                 <button type="button" class="btn btn-primary align-self-center" v-on:click="CargarIdPQRS()"><i class="fa fa-search"></i></button>
             </div>
             <div class="col-6 border py-1 d-flex justify-content-between" style="font-size: 16px !important" ref="statusColorBar">
                <span class="align-self-center"><i class="fa fa-circle pr-4" style="color: forestgreen;" ></i> Estado actual: {{infoPQRSEstado}}</span> 
                
            </div>
             <div class="col-2">
                 <button type="button" class="btn btn-primary align-self-center" v-if="mostrarBtnSiguienteEstado" v-on:click="ActualizarEstadoPQRS()">
                    Proceder a {{pqrsSiguienteEstadoDesc}}
                </button>
             </div>
         </div>

         <div id="accordion">
             <div class="card" id="DatosGenerales" >
				<div class="card-header">
					<a class="collapsed card-link" data-toggle="collapse" href="#collapseDatosGenerales" data-i18n="FUP_datos_generales">Datos Generales</a>
				</div>
				<div id="collapseDatosGenerales" class="collapse show" data-parent="#accordion">
                    <div class="container-fluid" style="font-size: 14px !important">
                        <div class="row alert alert-primary mx-1 mt-3">
                            <h6 style="margin-bottom: 0px;">Datos de Contacto PQRS</h6>
                        </div>
                        <div class="row mt-4">
                            <span class="col-1 font-weight-bold">Fuente: </span>
                            <span class="col-4"><input type="text" disabled="disabled" v-model="infoPQRSFuente" class="form-control"/></span>
                            <span class="col-1 font-weight-bold">Tipo: </span>
                            <span class="col-2"><input type="text" disabled="disabled" v-model="infoPQRSTipo" class="form-control"/></span>
                            <span class="col-1 font-weight-bold" v-if="infoPQRSSubTipo !== ''">Subtipo: </span>
                            <span class="col-3" v-if="infoPQRSSubTipo !== ''"><input type="text" disabled="disabled" v-model="infoPQRSSubTipo" class="form-control"/></span>
                        </div>
                        <div class="row mt-2">
                            <span class="col-1 font-weight-bold">Cliente: </span>
                            <span class="col-4" v-if="infoPQRSClienteNombre != ''"><input type="text" disabled="disabled" v-model="infoPQRSClienteNombre" class="form-control"/></span>
                            <span class="col-4" v-else><input type="text" disabled="disabled" v-model="infoPQRSOtroClienteNombre" class="form-control"/></span>
                            <span class="col-1 font-weight-bold">NroOrden: </span>
                            <span class="col-2"><input type="text" disabled="disabled" v-model="infoPQRSNroOrden" class="form-control"/></span>
                            <span class="col-1 font-weight-bold">Estado: </span>
                            <span class="col-3"><input type="text" disabled="disabled" v-model="infoPQRSEstado" class="form-control"/></span>
                        </div>
                        <div class="row mt-2">
                            <span class="col-1 font-weight-bold">Nombre: </span>
                            <span class="col-4"><input type="text" disabled="disabled" v-model="infoPQRSNombreRespuesta" class="form-control"/></span>
                            <span class="col-1 font-weight-bold">Usuario: </span>
                            <span class="col-2"><input type="text" disabled="disabled" v-model="infoPQRSUsuarioCreacion" class="form-control"/></span>
                            <span class="col-1 font-weight-bold">Fecha: </span>
                            <span class="col-3"><input type="text" disabled="disabled" v-model="infoPQRSFechaCreacion" class="form-control"/></span>
                        </div>
                        <div class="row mt-2">
                            <span class="col-1 font-weight-bold">Direccion: </span>
                            <span class="col-4"><input type="text" disabled="disabled" v-model="infoPQRSDireccionRespuesta" class="form-control"/></span>               
                            <span class="col-1 font-weight-bold">Telefono: </span>
                            <span class="col-2"><input type="text" disabled="disabled" v-model="infoPQRSTelefonoRespuesta" class="form-control"/></span>
                            <span class="col-1 font-weight-bold">Email: </span>
                            <span class="col-3"><input type="text" disabled="disabled" v-model="infoPQRSEmailRespuesta" class="form-control"/></span>
                        </div>
                        <div class="row mt-2 pb-3">
                            <span class="col-1 font-weight-bold">Descripción: </span>
                            <span class="col-11">
                                <textarea rows="4" disabled="disabled" v-model="infoPQRSDetalle" class="form-control"></textarea>
                            </span>
                            
                        </div>
                        <div class="row mt-3" style="margin-bottom: 15px !important" v-if="funcionalidadesBotones.editarInformacionPQRS">
                            <div class="col-3">
                                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#editResumenDataModal">
                                    Editar información
                                </button>
                            </div>
                        </div>
                        <div v-if="mostrarDatosFup">
                            <div class="row alert alert-primary mx-1 mt-4">
                                <h6 style="margin-bottom: 0px;">Informacion Fup</h6>
                            </div>
                            <div class="row mt-4">
                                <span class="col-1 font-weight-bold">Pais: </span>
                                <span class="col-2"><input type="text" disabled="disabled" v-model="infoFupPais" class="form-control"/></span>
                                <span class="col-1 font-weight-bold">Ciudad: </span>
                                <span class="col-3"><input type="text" disabled="disabled" v-model="infoFupCiudad" class="form-control"/></span>
                                <span class="col-1 font-weight-bold">Cliente: </span>
                                <span class="col-4"><input type="text" disabled="disabled" v-model="infoFupCliente" class="form-control"/></span>
<%--                                <span class="col-1 font-weight-bold">Id_Ofa: </span>
                                <span class="col-1"><input type="text" disabled="disabled" v-model="infoFupId_Ofa" class="form-control"/></span>--%>
                            </div>
                            <div class="row mt-2 pb-2">
                                <span class="col-1 font-weight-bold">FUP: </span>
                                <span class="col-2"><input type="text" disabled="disabled" v-model="infoFupID" class="form-control"/></span>
                                <span class="col-1 font-weight-bold">Obra: </span>
                                <span class="col-3"><input type="text" disabled="disabled" v-model="infoFupObra" class="form-control"/></span>
                                <span class="col-1 font-weight-bold">Contacto: </span>
                                <span class="col-4"><input type="text" disabled="disabled" v-model="infoFupContacto" class="form-control"/></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
             <div class="card" id="Timeline" >
				<div class="card-header">
					<a class="collapsed card-link" data-toggle="collapse" href="#collapseTimeline">Detalle</a>
				</div>
				<div id="collapseTimeline" class="collapse show" data-parent="#accordion">
                    <div class="container-fluid">
                        <div v-if="infoPQRSEstadoID >= 0">
                            <div class="row alert alert-primary mx-1 mt-4">
                                <h6 style="margin-bottom: 0px;">Radicado</h6>
                            </div>
                                <div class="row mx-1 mt-3">
                                    <div class="col-12">
                                    <span class="font-weight-bold">Detalle</span>: {{infoPQRSDetalle}}
                                </div>
                                </div>
                            <div class="row mx-1">
                                <div class="col-2">
                                    <b>Archivos Cargados</b>
                                </div>
                            </div>
                            <div class="row mx-1">
                                <div class="col-2" v-if="funcionalidadesBotones.añadirArchivosRadicado">
                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#adicionarArchivosRadicacionModal">
                                        Añadir archivos
                                    </button>
                                </div>
                            </div>
                            <div class="mx-1">
                                <div class="col-6">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Archivo</th>
                                                <th>Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody v-for="rad in radicado">
                                            <tr>
                                                <td>{{rad.FileName}}</td>
                                                <td>
                                                    <a :href="rad.Path" target="_blank">
                                                    <button 
                                                        type="button" 
                                                        class="btn fa fa-download" 
                                                        >
                                                    </button></a>
                                                    <button v-if="funcionalidadesBotones.eliminarArchivosRadicado"
                                                        type="button" 
                                                        class="btn fa fa-trash ml-3" 
                                                        @click ="PreguntaBorrarArchivoFisico(rad.FileName, rad.Path, rad.IdArchivo, 1)"
                                                        >
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div v-if="infoPQRSEstadoID >= 1">
                            <div class="row alert alert-primary mx-1 mt-4">
                                <h6 style="margin-bottom: 0px;">Asignacion de Procesos</h6>
                            </div>
                            <div class="row mx-1 mt-3">
                                <div class="col-3">
                                    <b>Fecha: </b>{{fechaAsignacionProcesos}} 
                                </div>
                                <div class="col-2">
                                    <b>Usuario: </b>{{usuarioAsignacionProcesos}} 
                                </div>
                            </div>
                            <div class="row mx-1">
                                <div class="col-6">
                                    <div v-if="!mostrarEdicionProcesosAsignados">
                                        <table class="table text-center table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th><b>Proceso</b></th>
                                                    <th><b>Email</b></th>
                                                    <th v-if="funcionalidadesBotones.solicitarInformacionProcesosAsignados"></th>
                                                </tr>
                                            </thead>
                                            <tbody v-for="asignacionProceso in asignacionProcesos">
                                                <tr>
                                                    <td>{{asignacionProceso.Proceso}}</td>
                                                    <td>{{asignacionProceso.Email}}</td>
                                                    <td v-if="funcionalidadesBotones.solicitarInformacionProcesosAsignados">
                                                        <button type="button" class="btn btn-primary"  v-on:click="MostrarModalSolicitarInformacionProcesos(asignacionProceso.PQRSProcesoId, asignacionProceso.Proceso, asignacionProceso.Email)">
                                                            <i class="fa fa-hand-paper-o" aria-hidden="true"></i>
                                                            <span class="ml-3">Solicitar más información</span>
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>   
                                    <div v-else>
                                        <table class="table text-center table-striped table-sm table-bordered">
                                            <thead>
                                                <tr>
                                                    <th></th>
                                                    <th><b>Proceso</b></th>
                                                    <th><b>Email</b></th>
                                                </tr>
                                            </thead>
                                            <tbody v-for="procesoAdmin in procesosAdmin">
                                                <tr>
                                                    <td><input type="checkbox" v-model="procesoAdmin.Selected" :disabled="procesoAdmin.Blocked"/></td>
                                                    <td>{{procesoAdmin.Proceso}}</td>
                                                    <td>
                                                        <textarea class="form-control" v-model="procesoAdmin.EmailProceso" :disabled="procesoAdmin.Blocked"></textarea>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="row mx-1" v-if="funcionalidadesBotones.añadirProcesosAsignacion">
                                <div class="col-6" v-if="!mostrarEdicionProcesosAsignados">
                                    <button type="button" class="btn btn-primary" v-on:click="this.mostrarEdicionProcesosAsignados = true;">Añadir procesos</button>
                                </div>
                                <div class="col-6" v-else>
                                    <button type="button" class="btn btn-success" v-on:click="GuardarAsignacionProcesos()">Guardar cambios</button>
                                    <div class="row">
                                        <span class="col-12 font-weight-bold">Recuerda que para asignar más de un correo se deben separar por punto y coma (;)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div v-if="respuestasProcesos.length >= 0">
                            <div class="row alert alert-primary mx-1 mt-4">
                                <h6 style="margin-bottom: 0px;">Respuestas procesos</h6>
                            </div>
                            <div class="row mx-1 mt-3" v-if="funcionalidadesBotones.adicionarRespuestasProcesos">
                                <div class="col-6">
                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalAdicionarRespuestasProcesos">Añadir respuesta</button>
                                </div>
                            </div>
                            <hr />
                            <div v-for="respuestaProceso in respuestasProcesos">
                                <div class="border py-2">
                                    <div class="row mx-1">
                                        <span class="col-2"><b>Proceso respuesta: </b> {{respuestaProceso.Proceso}}</span>
                                        <span class="col-2"><b>Usuario: </b>{{respuestaProceso.Usuario}}</span>
                                        <span class="col-4"><b>Fecha: </b>{{respuestaProceso.Fecha.replace("T"," ")}}</span>
                                    </div>
                                    <div class="row mx-1">
                                        <span class="col-4"><b>Respuesta: </b> {{respuestaProceso.Respuesta}}</span>
                                    </div>
                                    <div class="row mx-1">
                                        <div class="col-6">
                                            <table class="table table-bordered" v-if="respuestaProceso.Archivos !== null">
                                                <tr v-for="archivo in respuestaProceso.Archivos">
                                                    <td>{{archivo.FileName}}</td>
                                                    <td>
                                                        <a :href="archivo.Path" target="_blank">
                                                        <button 
                                                            type="button" 
                                                            class="btn fa fa-download" 
                                                            >
                                                        </button></a>
                                                        <button v-if="funcionalidadesBotones.eliminarArchivosRespuestas && archivo.CanBeDeleted"
                                                            type="button" 
                                                            class="btn fa fa-trash ml-3" 
                                                            @click ="PreguntaBorrarArchivoFisico(archivo.FileName, archivo.Path, archivo.IdArchivo, 6)"
                                                            >
                                                        </button>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    
                                    </div>
                                </div>
                                <hr />
                            </div>
                        </div>
                        <div v-if="infoPQRSEstadoID >= 3 && tipoPQRS == 2">
                            <div class="row alert alert-primary mx-1 mt-4 py-2 d-flex justify-content-between">
                                <h6 style="margin-bottom: 0px;" class="align-self-center">Reclamo Procedente</h6>
                                <button class="btn btn-primary" style="padding-right: 16px !important;" @click="ReclamoProcedente()" type="button">Indicar procedencia</button> 
                            </div>
                            <div v-if="esProcedente !== null">
                                <div class="row mx-1 mt-3">
                                    <div class="col-3">
                                        <span><b>Es Procedente ? </b>
                                            <span v-if="esProcedente === true">
                                                Si
                                            </span>
                                            <span v-else>
                                                No
                                            </span>
                                        </span>
                                    </div>
                                </div>
                                <div class="row mx-1 mt-3">
                                    <div class="col-10">
                                        <b>Descripcion Procedencia</b>
                                        <textarea disabled="disabled" class="form-control" rows="3" v-model="infoPQRSDescripcionProcedencia"></textarea>
                                    </div>
                                </div>
                                <div class="row mx-1 mt-3">
                                    <div class="col-12" v-if="infoPQRSOrdenGarantiaOMejora !== ''">
                                        <span><b>Tipo de orden</b>: {{ infoPQRSOrdenGarantiaOMejora }}</span>
                                    </div>
                                </div>
                                <div class="row mx-1 mt-3">
                                    <div class="col-12">
                                        <span><b>Orden Procedente: {{ infoPQRSIdOrdenProcedente }} </b></span>
                                    </div>
                                </div>
                                <hr />
                                <div v-if="esProcedente !== null" class="mx-1">
                                    <div class="col-6">
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>Proceso</th>
                                                    <th>Descripcion</th>
                                                    <th>Email</th>
                                                </tr>
                                            </thead>
                                            <tbody v-for="noConformidad in noConformidades">
                                                <tr>
                                                    <td>{{noConformidad.Proceso}}</td>
                                                    <td>{{noConformidad.DescripcionNoConformidad}}</td>
                                                    <td>{{noConformidad.Email}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div v-if="infoPQRSEstadoID >= 6 && esProcedente == 1 && tipoPQRS == 2">
                            <div class="row alert alert-primary mx-1 mt-4">
                                <h6 style="margin-bottom: 0px;">Listados</h6>
                            </div>
                            <div class="row mx-1">
                                <div class="col-2">
                                    <b>Archivos Cargados</b>
                                </div>
                            </div>
                            <div class="" v-if="descripcionListado == ''">
                                <div class="row mx-1">
                                    <b>Requiere listados</b>
                                    <hr />
                                </div>
                                <div class="row mx-1">
                                    <div class="col-2" v-if="funcionalidadesBotones.añadirArchivosListados">
                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#adicionarArchivosListadosModal">
                                        Añadir archivos
                                    </button>
                                </div>
                                </div>                                
                            </div>
                            <div class="" v-else>
                                <div class="row mx-1">
                                    <b>No requiere listados</b>
                                    <hr />
                                </div>
                                <div class="row mx-1">
                                    <b>Descripción</b> <hr />
                                </div>
                                <div class="row mx-1">
                                    <textarea disabled="disabled" class="form-control col-4" cols="5" rows="4" v-model="descripcionListado"></textarea>
                                </div>
                            </div>
                            <div class="mx-1" v-if="descripcionListado == ''">
                                <div class="col-12">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Archivo</th>
                                                <th>Usuario</th>
                                                <th>Mail</th>
                                                <th>Fecha</th>
                                                <th>Descargar</th>
                                            </tr>
                                        </thead>
                                        <tbody v-for="listado in listados">
                                            <tr>
                                                <td>{{listado.FileName}}</td>
                                                <td>{{listado.Usuario}}</td>
                                                <td>{{listado.Mail}}</td>
                                                <td>{{listado.Fecha}}</td>
                                                <td>
                                                    <a :href="listado.Path" target="_blank">
                                                    <button 
                                                        type="button" 
                                                        class="btn fa fa-download" 
                                                        >
                                                    </button></a>
                                                    <button v-if="funcionalidadesBotones.eliminarArchivosListados"
                                                        type="button" 
                                                        class="btn fa fa-trash ml-3" 
                                                        @click ="PreguntaBorrarArchivoFisico(listado.FileName, listado.Path, listado.IdArchivo, 4)"
                                                        >
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div v-if="infoPQRSEstadoID >= 9">
                            <div class="row alert alert-primary mx-1 mt-4 py-2 d-flex justify-content-between">
                                <h6 style="margin-bottom: 0px;" class="align-self-center">Cierre</h6>
                                <button class="btn btn-primary" style="padding-right: 16px !important;" @click="MostrarCierreObra()" type="button">Proceder a Cierre</button> 
                            </div>
                            <div class="row mx-1">
                                <div class="col-3">
                                    <b>Fecha Cierre:</b> {{cierre.fechaCierrePlan}}
                                </div>
                            </div>
                            <div class="row mx-1">
                                <div class="col-10">
                                    <b>Plan Acción</b>
                                    <textarea class="form-control" v-model="cierre.planAccion" rows="3" disabled="disabled"></textarea>
                                </div>
                            </div>
                            <hr />
                            <div class="row mx-1">
                                <div class="col-2">
                                    <b>Archivos Cargados</b>
                                </div>
                            </div>
                            <div class="row mx-1">
                                <div class="col-2" v-if="funcionalidadesBotones.añadirArchivosCierre">
                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#adicionarArchivosCierreModal">
                                        Añadir archivos
                                    </button>
                                </div>
                            </div>
                            <div class="mx-1">
                                <div class="col-6">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Archivo</th>
                                                <th>Descarga</th>
                                            </tr>
                                        </thead>
                                        <tbody v-for="archivoCierre in archivosCierre">
                                            <tr>
                                                <td>{{archivoCierre.FileName}}</td>
                                                <td>
                                                    <a :href="archivoCierre.Path" target="_blank">
                                                    <button 
                                                        type="button" 
                                                        class="btn fa fa-download" 
                                                        >
                                                    </button></a>
                                                    <button v-if="funcionalidadesBotones.eliminarArchivosCierre"
                                                        type="button" 
                                                        class="btn fa fa-trash ml-3" 
                                                        @click ="PreguntaBorrarArchivoFisico(archivoCierre.FileName, archivoCierre.Path, archivoCierre.IdArchivo, 2)"
                                                        >
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="row alert alert-primary mx-1 mt-4 py-2 d-flex justify-content-between">
                                <h6 style="margin-bottom: 0px;" class="align-self-center">Producción</h6>
                                <button class="btn btn-primary" style="padding-right: 16px !important;" @click="MostrarProduccion()" type="button">Proceder a Producción</button> 
                            </div>
                            <div class="row mx-1" v-if="funcionalidadesBotones.editarFechasProduccion">
                                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#ModalEditarProduccion">
                                        Editar Fechas
                                    </button>
                            </div>
                            <div>
                                <div class="row mx-1 mt-3" style="font-size: 14px !important;">
                                    <div class="col-3">
                                        <b>Fecha Plan Alum</b>
                                        <input type="date" v-model="fechaPlanAlum" disabled="disabled" class="form-control " />
                                    </div>
                                    <div class="col-3">
                                        <b>Fecha Req Alum</b> 
                                        <input type="date" v-model="fechaReqAlum" disabled="disabled" class="form-control " />
                                    </div>
                                    <div class="col-3">
                                        <b>Fecha Desp Alum</b> 
                                        <input type="date" v-model="fechaDespAlum" disabled="disabled" class="form-control " />
                                    </div>
                                </div>
                                <div class="row mx-1 mt-2" style="font-size: 14px !important;">
                                    <div class="col-3">
                                        <b>Fecha Plan Acero</b> 
                                        <input type="date" v-model="fechaPlanAcero" disabled="disabled" class="form-control " />
                                    </div>
                                    <div class="col-3">
                                        <b>Fecha Req Acero</b> 
                                        <input type="date" v-model="fechaReqAcero" disabled="disabled" class="form-control " />
                                    </div>
                                    <div class="col-3">
                                        <b>Fecha Desp Acero</b>
                                        <input type="date" v-model="fechaDespAcero" disabled="disabled" class="form-control " />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr />
                         <div>
                            <div class="row alert alert-primary mx-1 mt-4 py-2 d-flex justify-content-between">
                                <h6 style="margin-bottom: 0px;" class="align-self-center">Comprobante en Obra</h6>
                                <button class="btn btn-primary" style="padding-right: 16px !important;" @click="MostrarComprobanteObra()" type="button">Proceder a Comprobante</button> 
                                </div>
                                <div class="row mx-1">
                                    <div class="col-2">
                                        <b>Archivos Cargados</b>
                                    </div>
                                </div>
                            <div class="row mx-1">
                                <div class="col-2">
                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#adicionarArchivosComprobacionModal">
                                        Añadir archivos
                                    </button>
                                </div>
                            </div>
                            <div class="mx-1">
                                <div class="col-6">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Archivo</th>
                                                <th>Descarga</th>
                                            </tr>
                                        </thead>
                                        <tbody v-for="archivoProduccion in archivosProduccion">
                                            <tr>
                                                <td>{{archivoProduccion.FileName}}</td>
                                                <td>
                                                    <a :href="archivoProduccion.Path" target="_blank">
                                                    <button 
                                                        type="button" 
                                                        class="btn fa fa-download" 
                                                        >
                                                    </button></a>
                                                    <button v-if="funcionalidadesBotones.eliminarArchivosComprobacion"
                                                        type="button" 
                                                        class="btn fa fa-trash ml-3" 
                                                        @click ="PreguntaBorrarArchivoFisico(archivoProduccion.FileName, archivoProduccion.Path, archivoProduccion.IdArchivo, 5)"
                                                        >
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                         </div>
                    </div>
                </div>
            </div>
            <div class="card" id="Comunicados" >
				<div class="card-header">
					<a class="collapsed card-link" data-toggle="collapse" href="#collapseComunicados">Comunicados</a>
				</div>
				<div id="collapseComunicados" class="collapse show" data-parent="#accordion">
                    <div class="container-fluid">
                        <div class="row alert alert-primary mx-1 mt-4 py-2 d-flex justify-content-between">
                            <h6 style="margin-bottom: 0px;" class="align-self-center">Comunicación con el Cliente</h6>
                            <button v-if="idPQRS !== 0" class="btn btn-primary" @click="MostrarEnviarComunicadoCliente()" style="padding-right: 16px !important;" type="button">Enviar Comunicado</button>
                        </div>
                        <hr />
                        <div v-for="comunicado in comunicados">
                                <div class="border py-2">
                                    <div class="row mx-1">
                                        <span class="col-12"><b>Para: </b> {{comunicado.MessageTo}}</span>
                                    </div>
                                    <div class="row mx-1">
                                        <span class="col-12"><b>Con copia: </b>{{comunicado.MessageCc}}</span>
                                    </div>
                                    <div class="row mx-1">
                                        <span class="col-12"><b>Fecha :</b>{{comunicado.Fecha}}</span>
                                    </div>
                                    <div class="row mx-1">
                                        <span class="col-4"><b>Mensaje:</b></span>
                                    </div>
                                    <div class="row mx-3">
                                        <textarea disabled="disabled" v-model="comunicado.Mensaje" class="form-control" rows="3"></textarea>
                                    </div>
                                    <div class="row mx-1" v-if="comunicado.Archivos !== null">
                                        <div class="col-6 ml-4">
                                            <h6 class="mt-2 font-weight-bold">Archivos Enviados</h6>
                                            <table class="table table-bordered">
                                                <tr v-for="archivo in comunicado.Archivos">
                                                    <td>{{archivo.FileName}}</td>
                                                    <td>
                                                        <a :href="archivo.Path" target="_blank">
                                                        <button 
                                                            type="button" 
                                                            class="btn fa fa-download" 
                                                            >
                                                        </button></a>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    
                                    </div>
                                </div>
                                <hr />
                            </div>
                    </div>
                </div>
            </div>
         </div>
     </div>

    <style>
        option {
            padding: 5px !important;
        }

        .wfull {
            width: 100% !important;
        }

        .filter-column {
            display: flex;
            align-items: center;
            justify-items: center;
            position: relative;
        }

        .filter-icon {
            cursor: pointer;
            display: inline-block;
            width: 15px !important;
            height: 15px !important;
            margin-right: 4px;
            background-color: transparent !important;
            border: none !important;
        }

        .filter-menu {
            padding: 15px 30px;
            z-index: 1;
            position: absolute;
            top: 30px;
            width: 200px;
            background-color: #fff;
            border: 1px solid #e0e0e0;
        }

        .customize-table {
            --easy-table-border: 1px solid #445269;
            --easy-table-row-border: 1px solid #a0afc6;
            --easy-table-header-background-color: #007bff;
        }

        .w-full {
            width: 100% !important;
        }

        .modal-body .row label {
            margin-top: 8% !important;
            font-weight: bold !important;
        }

        @media (min-width: 992px) {
            .modal-dialog {
                width: 800px !important;
                max-width: 100% !important;
            }
        }


        /*Estilos drag and drop files*/

        .main {
            display: flex;
            flex-grow: 1;
            align-items: center;
            height: 24vh;
            justify-content: center;
            text-align: center;
            margin: 1.5rem;
        }

        .dropzone-container {
            padding: 1rem;
            background: #f7fafc;
            border: 1px solid #e2e8f0;
        }

        .hidden-input {
            opacity: 0;
            overflow: hidden;
            position: absolute;
            width: 1px;
            height: 1px;
        }

        .file-label {
            font-size: 20px;
            display: block;
            cursor: pointer;
        }

        .preview-container {
            display: flex;
            margin-top: 2rem;
            max-width: 600px !important;
            justify-content: center;
        }

            .preview-container > * {
                flex: 1 1 1;
            }

        .preview-card {
            display: flex;
            border: 1px solid #a2a2a2;
            padding: 5px;
            margin-left: 5px;
            width: 94px !important;
            flex-direction: column !important;
        }

            .preview-card > div {
                display: flex !important;
                flex-direction: column !important;
                justify-content: center;
                align-items: center;
            }

                .preview-card > div > p {
                    width: 50px !important
                }

        .preview-img {
            width: 50px;
            height: 50px;
            border-radius: 5px;
            border: 1px solid #a2a2a2;
            background-color: #a2a2a2;
        }

        /*Estilos para linea de tiempo*/

        .container-timeline {
            background: #232931;
            width: 100%;
            height: 500px;
            margin: 0 auto;
            position: relative;
            box-shadow: 2px 5px 20px rgba(119, 119, 119, 0.5);
        }

        .leftbox {
            top: 0;
            left: 0;
            position: absolute;
            width: 15%;
            height: 110%;
            padding: 0em 17rem 0em 0em;
            overflow-y: auto;
            overflow-x: hidden;
            max-height: 500px !important;
        }

        .rightbox {
            padding: 0em 31rem 0em 0em;
            height: 100%;
            background-color: white !important;
            position: absolute;
            left: 35%;
            width: 10%;
            transition: opacity 2s ease-in-out;
            opacity: 0;
        }

        .statusShown {
            opacity: 1
        }

        .rb-container {
            font-family: "PT Sans", sans-serif;
            width: 50%;
            margin: auto;
            display: block;
            position: relative;
        }

            .rb-container ul.rb {
                margin: 1em 0;
                padding: 0;
                display: inline-block;
            }

                .rb-container ul.rb li {
                    list-style: none;
                    margin: auto;
                    margin-left: 5em;
                    min-height: 50px;
                    border-left: 1px dashed #fff !important;
                    padding: 0 0 40px 30px;
                    position: relative;
                    cursor: pointer !important;
                }

                    .rb-container ul.rb li:last-child {
                        border-left: 0;
                    }

                    .rb-container ul.rb li::before {
                        position: absolute;
                        left: -18px;
                        top: 0px;
                        content: " ";
                        border: 8px solid rgba(255, 255, 255, 1);
                        border-radius: 500%;
                        background: #50d890;
                        height: 34px;
                        width: 34px;
                        transition: all 500ms ease-in-out;
                    }

                    .rb-container ul.rb li:hover::before {
                        border-color: #232931;
                        transition: all 1000ms ease-in-out;
                    }

        ul.rb li .timestamp {
            color: #50d890;
            position: relative;
            width: 160px;
            font-size: 12px;
        }

        .item-title {
            color: #fff;
        }


        [data-badge]:after {
            content: attr(data-badge);
            /*position: absolute;
                 top: -10px;
                   right: -10px;*/
            font-size: 10px;
            background: red;
            color: white;
            width: 100px;
            height: 20px;
            text-align: center;
            line-height: 18px;
            border-radius: 50%;
        }
    </style>
</asp:Content>

